(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{103:function(e,t,s){},128:function(e,t){},167:function(e,t,s){"use strict";s.r(t);var a=s(22),c=s.n(a),n=s(26),r=(s(101),s(102),s(103),s(89)),i=s.n(r),j=s(36),l=s(38),d=s(90),b=s.n(d),m=s(14),x=s(172),o=s(91),u=s(175),O=s(173),h=s(50),p=s(6),v=s.n(p),y=s(2);function f(e){var t="";return null!==e&&(t="green",e<99&&(t="lightgreen"),e<95&&(t="yellow"),e<90&&(t="red")),t}function N(e){var t=e.first,s=e.last,a=e.service,c=e.nameFlag,n=void 0!==c&&c,r=a.name,i=a.uptimeDays,l=a.state,d=i.map((function(e){return e.uptime})),b=d.reduce((function(e,t){return e+t}),0)/d.length,m=function(e){for(var t=e.start.startOf("day"),s=e.end.endOf("day"),a=[];t<s;)a.push(t.toISODate()),t=t.plus({days:1});return a}(h.Interval.fromDateTimes(h.DateTime.now().minus({days:89}),h.DateTime.now()));return Object(y.jsx)(x.a,{className:v()("infoRow",{first:t,"pt-4":!t,"pb-4":!s}),children:Object(y.jsxs)(o.a,{children:[Object(y.jsxs)(x.a,{className:"info",children:[Object(y.jsxs)(o.a,{className:"pl-0",children:[n&&Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(j.A,{href:"/service/".concat(a.id),children:Object(y.jsxs)("span",{style:{color:"white"},children:[r," \u279f "]})}),Object(y.jsx)("span",{className:"mx-1",children:"|"})]}),Object(y.jsxs)("span",{className:f(b),children:[b.toFixed(2),"%"]})]}),Object(y.jsxs)(o.a,{xs:"auto",className:v()("d-flex align-items-center pr-0",{lightgreen:l,red:!l}),children:[Object(y.jsx)("div",{className:"status mx-1",style:{width:"20px",height:"20px"}}),Object(y.jsx)("span",{children:l?"Operational":"Down"})]})]}),Object(y.jsx)(x.a,{className:"flex-nowrap mt-3 justify-content-end",children:m.map((function(e){var t=i.find((function(t){return t.date===e}));return Object(y.jsx)(g,{date:e,value:t?t.uptime:null},e)}))})]})})}function g(e){var t=e.value,s=e.date,a=f(t);return Object(y.jsx)(u.a,{placement:"top",overlay:Object(y.jsxs)(O.a,{children:[s,Object(y.jsx)("br",{}),t?"".concat(t.toFixed(2),"%"):""]}),children:Object(y.jsx)(o.a,{className:"tick px-0",children:Object(y.jsx)("div",{className:a})})})}var F,w,L=s(28),q=s.n(L),S=Object(m.gql)(F||(F=Object(n.a)(["\n  query Services {\n    services {\n      id\n      name\n      url\n      order\n      state\n\n      uptimeDays(days: 90) {\n        date\n        uptime\n      }\n    }\n  }\n"]))),C=Object(m.gql)(w||(w=Object(n.a)(["\n  query Overall {\n    uptime1: uptime(days: 1)\n    uptime7: uptime(days: 7)\n    uptime30: uptime(days: 30)\n    uptime90: uptime(days: 90)\n  }\n"])));function D(){var e=Object(m.useQuery)(S),t=e.data,s=e.loading,a=t&&t.services.every((function(e){return e.state})),c=t&&t.services.every((function(e){return!e.state}));return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(x.a,{className:v()("mainBox",{yellow:!c&&!a,red:c,lightgreen:a}),children:s?Object(y.jsx)(o.a,{className:"d-flex border-0 justify-content-center",children:Object(y.jsx)(q.a,{type:"pacman",active:!0})}):Object(y.jsxs)(o.a,{className:v()("d-flex align-items-center",{"justify-content-center":s}),children:[Object(y.jsx)("div",{className:"status mr-2",style:{width:"20px",height:"20px"}}),Object(y.jsx)("h2",{className:"my-auto",style:{fontWeight:"bold"},children:c||a?a?"All systems operational":"All systems down":"Some systems down"})]})}),Object(y.jsx)(x.a,{className:"mt-5",children:Object(y.jsx)("h4",{children:"Services"})}),Object(y.jsx)(x.a,{className:"mainBox",children:s?Object(y.jsx)(o.a,{className:"d-flex border-0 justify-content-center",children:Object(y.jsx)(q.a,{type:"pacman",active:!0})}):Object(y.jsx)(o.a,{children:t.services.map((function(e,s){return Object(y.jsx)(N,{service:e,first:0===s,last:s===t.services.length-1,nameFlag:!0},e.id)}))})}),Object(y.jsx)(T,{})]})}function T(){var e=Object(m.useQuery)(C),t=e.data,s=e.loading;return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(x.a,{children:Object(y.jsx)("h4",{className:"mt-5",children:"Overall Uptime"})}),Object(y.jsx)(x.a,{className:"mainBox overall",children:s?Object(y.jsx)(o.a,{className:"d-flex justify-content-center border-0",children:Object(y.jsx)(q.a,{type:"pacman",active:!0})}):Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)(o.a,{children:[Object(y.jsx)(x.a,{className:"number",children:Object(y.jsxs)(o.a,{children:[t&&t.uptime1.toFixed(3),"%"]})}),Object(y.jsx)(x.a,{className:"title",children:Object(y.jsx)(o.a,{children:"Last 24 hours"})})]}),Object(y.jsxs)(o.a,{children:[Object(y.jsx)(x.a,{className:"number",children:Object(y.jsxs)(o.a,{children:[t&&t.uptime7.toFixed(3),"%"]})}),Object(y.jsx)(x.a,{className:"title",children:Object(y.jsx)(o.a,{children:"Last 7 days"})})]}),Object(y.jsxs)(o.a,{children:[Object(y.jsx)(x.a,{className:"number",children:Object(y.jsxs)(o.a,{children:[t&&t.uptime30.toFixed(3),"%"]})}),Object(y.jsx)(x.a,{className:"title",children:Object(y.jsx)(o.a,{children:"Last 30 days"})})]}),Object(y.jsxs)(o.a,{children:[Object(y.jsx)(x.a,{className:"number",children:Object(y.jsxs)(o.a,{children:[t&&t.uptime90.toFixed(3),"%"]})}),Object(y.jsx)(x.a,{className:"title",children:Object(y.jsx)(o.a,{children:"Last 90 days"})})]})]})})]})}var $,A,B=s(96),k=s(176),I=s(177),R=s(95),G=s.n(R),M=Object(m.gql)($||($=Object(n.a)(["\n  mutation createService($name: String!, $url: String!, $interval: Float!, $timeout: Float!) {\n    createService(name: $name, url: $url, interval: $interval, timeout: $timeout){\n      name\n    }\n  }\n"])));function P(){var e=Object(m.useMutation)(M),t=Object(B.a)(e,1)[0];return Object(y.jsxs)(k.a,{inline:!0,className:"mainBox p-4",onSubmit:function(e){var s=G()(e.target,{hash:!0});s.interval=parseFloat(s.interval),s.timeout=parseFloat(s.timeout),t({variables:s}).then((function(t){l.b.success('Added service "'.concat(t.data.createService.name,'" succesfully!')),e.target.reset()})).catch((function(e){console.log(e),l.b.error(e.message,{autoclose:!1})})),e.preventDefault(),e.persist()},children:[Object(y.jsxs)(k.a.Row,{className:"w-100 pb-3",children:[Object(y.jsx)(o.a,{xs:"12",md:"auto",children:Object(y.jsxs)(k.a.Group,{children:[Object(y.jsx)(k.a.Label,{className:"mr-2",children:"Name:"}),Object(y.jsx)(k.a.Control,{type:"text",name:"name",required:!0})]})}),Object(y.jsx)(o.a,{xs:"12",md:"auto",children:Object(y.jsxs)(k.a.Group,{children:[Object(y.jsx)(k.a.Label,{className:"mr-2",children:"Url:"}),Object(y.jsx)(k.a.Control,{type:"text",name:"url",required:!0})]})})]}),Object(y.jsxs)(k.a.Row,{className:"w-100 pb-3",children:[Object(y.jsx)(o.a,{xs:"12",md:"auto",children:Object(y.jsxs)(k.a.Group,{children:[Object(y.jsx)(k.a.Label,{className:"mr-2",children:"Interval:"}),Object(y.jsx)(k.a.Control,{type:"number",min:0,defaultValue:5e3,name:"interval",required:!0})]})}),Object(y.jsx)(o.a,{xs:"12",md:"auto",children:Object(y.jsxs)(k.a.Group,{children:[Object(y.jsx)(k.a.Label,{className:"mr-2",children:"Timeout:"}),Object(y.jsx)(k.a.Control,{type:"number",min:0,defaultValue:3e3,name:"timeout",required:!0})]})}),Object(y.jsx)(o.a,{xs:"auto",children:Object(y.jsx)(I.a,{type:"submit",children:"Add Service"})})]})]})}var Q=Object(m.gql)(A||(A=Object(n.a)(["\n  query Services($id: ID!) {\n    service(id: $id) {\n      id\n      name\n      url\n      order\n      state\n\n      uptimeDays(days: 90) {\n        date\n        uptime\n      }\n\n      uptime1: uptime(days: 1)\n      uptime7: uptime(days: 7)\n      uptime30: uptime(days: 30)\n      uptime90: uptime(days: 90)\n\n      response: responseTime(days: 2){\n        avg\n        min\n        max\n      }\n    }\n  }\n"])));function U(e){var t=Object(m.useQuery)(Q,{variables:{id:e.id}}),s=t.data,a=t.loading;return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("h4",{children:"Uptime Last 90 days"}),Object(y.jsx)(x.a,{className:"mainBox",children:a?Object(y.jsx)(o.a,{className:"d-flex border-0 justify-content-center",children:Object(y.jsx)(q.a,{type:"pacman",active:!0})}):Object(y.jsx)(o.a,{children:s&&Object(y.jsx)(N,{service:s.service,first:!0,last:!0},s.service.id)})}),Object(y.jsx)(J,{data:s,loading:a}),Object(y.jsx)(V,{data:s,loading:a})]})}function J(e){var t=e.data,s=e.loading;return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("h4",{className:"mt-5",children:"Overall Uptime"}),Object(y.jsx)(x.a,{className:"mainBox overall",children:s?Object(y.jsx)(o.a,{className:"d-flex border-0 justify-content-center",children:Object(y.jsx)(q.a,{type:"pacman",active:!0})}):Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)(o.a,{children:[Object(y.jsx)(x.a,{className:"number",children:Object(y.jsxs)(o.a,{children:[t&&t.service.uptime1.toFixed(3),"%"]})}),Object(y.jsx)(x.a,{className:"title",children:Object(y.jsx)(o.a,{children:"Last 24 hours"})})]}),Object(y.jsxs)(o.a,{children:[Object(y.jsx)(x.a,{className:"number",children:Object(y.jsxs)(o.a,{children:[t&&t.service.uptime7.toFixed(3),"%"]})}),Object(y.jsx)(x.a,{className:"title",children:Object(y.jsx)(o.a,{children:"Last 7 days"})})]}),Object(y.jsxs)(o.a,{children:[Object(y.jsx)(x.a,{className:"number",children:Object(y.jsxs)(o.a,{children:[t&&t.service.uptime30.toFixed(3),"%"]})}),Object(y.jsx)(x.a,{className:"title",children:Object(y.jsx)(o.a,{children:"Last 30 days"})})]}),Object(y.jsxs)(o.a,{children:[Object(y.jsx)(x.a,{className:"number",children:Object(y.jsxs)(o.a,{children:[t&&t.service.uptime90.toFixed(3),"%"]})}),Object(y.jsx)(x.a,{className:"title",children:Object(y.jsx)(o.a,{children:"Last 90 days"})})]})]})})]})}function V(e){var t=e.data,s=e.loading;return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("h4",{className:"mt-5",children:"Response Time Last 2 days "}),Object(y.jsx)(x.a,{className:"mainBox overall",children:Object(y.jsx)(o.a,{style:{border:"none"},children:Object(y.jsx)(x.a,{children:s?Object(y.jsx)(o.a,{className:"d-flex border-0 justify-content-center",children:Object(y.jsx)(q.a,{type:"pacman",active:!0})}):Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)(o.a,{children:[Object(y.jsx)(x.a,{className:"number",children:Object(y.jsxs)(o.a,{children:[t&&t.service.response.avg.toFixed(2),"ms"]})}),Object(y.jsx)(x.a,{className:"title",children:Object(y.jsx)(o.a,{children:"Avg. response time"})})]}),Object(y.jsxs)(o.a,{children:[Object(y.jsx)(x.a,{className:"number",children:Object(y.jsxs)(o.a,{children:[t&&t.service.response.max.toFixed(2),"ms"]})}),Object(y.jsx)(x.a,{className:"title",children:Object(y.jsx)(o.a,{children:"Max. response time"})})]}),Object(y.jsxs)(o.a,{children:[Object(y.jsx)(x.a,{className:"number",children:Object(y.jsxs)(o.a,{children:[t&&t.service.response.min.toFixed(2),"ms"]})}),Object(y.jsx)(x.a,{className:"title",children:Object(y.jsx)(o.a,{children:"Min. response time"})})]})]})})})})]})}var z,E=s(0),H=Object(E.createContext)(),W=s(174),K={"/":function(){return Object(y.jsx)(D,{})},"/service/:id":function(e){var t=e.id;return Object(y.jsx)(U,{id:t})},"/admin":function(){return Object(y.jsx)(P,{})}},X=new m.HttpLink({uri:"/api"}),Y=new m.ApolloLink((function(e,t){var s=b.a.get("token");return s&&e.setContext({headers:{authorization:s}}),t(e)})),Z=new m.ApolloClient({cache:new m.InMemoryCache,link:Object(m.from)([Y,X])});function _(){var e=Object(m.useQuery)(Object(m.gql)(z||(z=Object(n.a)(["query Title{ \n    title \n    footer\n  }"])))).data,t=Object(j.useRoutes)(K);return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(l.a,{newestOnTop:!0}),Object(y.jsxs)(W.a,{children:[Object(y.jsx)(x.a,{className:"my-4 py-2",children:Object(y.jsx)("h1",{className:"title",onClick:function(){return Object(j.navigate)("/")},children:e?e.title:""})}),t||Object(y.jsx)("div",{}),e&&i()(e.footer)]})]})}var ee=function(){return Object(y.jsx)(m.ApolloProvider,{client:Z,children:Object(y.jsx)(H.Provider,{value:{},children:Object(y.jsx)(_,{})})})},te=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,178)).then((function(t){var s=t.getCLS,a=t.getFID,c=t.getFCP,n=t.getLCP,r=t.getTTFB;s(e),a(e),c(e),n(e),r(e)}))};c.a.render(Object(y.jsx)(ee,{}),document.getElementById("root")),te()}},[[167,1,2]]]);
//# sourceMappingURL=main.5de33629.chunk.js.map