{"version":3,"sources":["pages/helpers.jsx","pages/Home.jsx","pages/Admin.js","pages/Service.jsx","UserContext.js","App.js","reportWebVitals.js","index.js"],"names":["getColor","value","color","SiteRow","first","last","service","nameFlag","name","uptimeDays","state","values","map","r","uptime","avg","reduce","p","c","length","daysArray","interval","day","start","startOf","end","endOf","result","push","toISODate","plus","days","Interval","fromDateTimes","DateTime","now","minus","Row","className","classnames","Col","href","id","style","toFixed","xs","lightgreen","red","width","height","date","row","find","Tick","OverlayTrigger","placement","overlay","Tooltip","servicesQuery","gql","overallQuery","Home","useQuery","data","loading","allGood","services","every","allBad","yellow","type","active","fontWeight","i","Overall","uptime1","uptime7","uptime30","uptime90","servicesMutation","Admin","useMutation","mutate","Form","inline","onSubmit","e","variables","serialize","target","hash","parseFloat","timeout","then","toast","success","createService","reset","catch","err","console","log","error","message","autoclose","preventDefault","persist","md","Group","Label","Control","required","min","defaultValue","Button","serviceQuery","props","ResponseTime","border","response","max","UserContext","createContext","routes","httpLink","HttpLink","uri","authLink","ApolloLink","operation","forward","token","Cookies","get","setContext","headers","authorization","client","ApolloClient","cache","InMemoryCache","link","from","App","routeResult","useRoutes","newestOnTop","Container","onClick","navigate","title","ReactHtmlParser","footer","AppWrapper","Provider","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.c3245f30.chunk.js","sourcesContent":["import { Row, Col, OverlayTrigger, Tooltip } from 'react-bootstrap'\nimport { Interval, DateTime } from 'luxon'\nimport classnames from 'classnames'\nimport { A } from 'hookrouter'\n\nexport default function getColor (value) {\n  let color = ''\n\n  if (value !== null) {\n    color = 'green'\n    if (value < 99) color = 'lightgreen'\n    if (value < 95) color = 'yellow'\n    if (value < 90) color = 'red'\n  }\n  return color\n}\n\nfunction days (interval) {\n  let day = interval.start.startOf('day')\n  const end = interval.end.endOf('day')\n  const result = []\n\n  while (day < end) {\n    result.push(day.toISODate())\n    day = day.plus({ days: 1 })\n  }\n\n  return result\n}\n\nexport function SiteRow ({ first, last, service, nameFlag = false }) {\n  const { name, uptimeDays, state } = service\n\n  const values = uptimeDays.map(r => r.uptime)\n  const avg = values.reduce((p, c) => p + c, 0) / values.length\n\n  const daysArray = days(Interval.fromDateTimes(DateTime.now().minus({ days: 89 }), DateTime.now()))\n\n  return (\n    <Row className={classnames('infoRow', { first, 'pt-4': !first, 'pb-4': !last })}>\n      <Col>\n        <Row className='info'>\n          <Col className='pl-0'>\n            {nameFlag && (\n              <>\n                <A href={`/service/${service.id}`}><span style={{ color: 'white' }}>{name} ➟ </span></A>\n                <span className='mx-1'>|</span>\n              </>\n            )}\n            <span className={getColor(avg)}>{avg.toFixed(2)}%</span>\n          </Col>\n          <Col xs='auto' className={classnames('d-flex align-items-center pr-0', { lightgreen: state, red: !state })}>\n            <div className='status mx-1' style={{ width: '20px', height: '20px' }} />\n            <span>{state ? 'Operational' : 'Down'}</span>\n          </Col>\n        </Row>\n        <Row className='flex-nowrap mt-3 justify-content-end'>\n          {daysArray.map(date => {\n            const row = uptimeDays.find(r => r.date === date)\n            return <Tick key={date} date={date} value={row ? row.uptime : null} />\n          })}\n        </Row>\n      </Col>\n    </Row>\n  )\n}\n\nexport function Tick ({ value, date }) {\n  const color = getColor(value)\n\n  return (\n    <OverlayTrigger\n      placement='top'\n      overlay={\n        <Tooltip>\n          {date}\n          <br />\n          {value ? `${value.toFixed(2)}%` : ''}\n        </Tooltip>\n      }\n    >\n      <Col className='tick px-0'>\n        <div className={color} />\n      </Col>\n    </OverlayTrigger>\n  )\n}\n","import { gql, useQuery } from '@apollo/client'\nimport { Col, Row } from 'react-bootstrap'\nimport { SiteRow } from './helpers'\nimport classnames from 'classnames'\nimport Loader from 'react-loaders'\n\nconst servicesQuery = gql`\n  query Services {\n    services {\n      id\n      name\n      url\n      order\n      state\n\n      uptimeDays(days: 90) {\n        date\n        uptime\n      }\n    }\n  }\n`\n\nconst overallQuery = gql`\n  query Overall {\n    uptime1: uptime(days: 1)\n    uptime7: uptime(days: 7)\n    uptime30: uptime(days: 30)\n    uptime90: uptime(days: 90)\n  }\n`\n\nexport default function Home () {\n  const { data, loading } = useQuery(servicesQuery)\n\n  const allGood = data && data.services.every(r => r.state)\n  const allBad = data && data.services.every(r => !r.state)\n\n  return (\n    <>\n      <Row className={classnames('mainBox', { yellow: !allBad && !allGood, red: allBad, lightgreen: allGood })}>\n        {loading\n          ? <Col className='d-flex justify-content-center'><Loader type='pacman' active /></Col>\n          : (\n            <Col className={classnames('d-flex align-items-center', { 'justify-content-center': loading })}>\n              <div className='status mr-2' style={{ width: '20px', height: '20px' }} />\n              <h2 className='my-auto' style={{ fontWeight: 'bold' }}>\n                {!allBad && !allGood\n                  ? 'Some systems down'\n                  : (\n                      allGood ? 'All systems operational' : 'All systems down'\n                    )}\n              </h2>\n            </Col>\n            )}\n      </Row>\n\n      <Row className='mt-5'><h4>Services</h4></Row>\n      <Row className='mainBox'>\n        {loading\n          ? <Col className='d-flex justify-content-center'><Loader type='pacman' active /></Col>\n          : (\n            <Col>\n              {data.services.map((service, i) => (\n                <SiteRow key={service.id} service={service} first={i === 0} last={i === data.services.length - 1} nameFlag />\n              ))}\n            </Col>\n            )}\n      </Row>\n      <Overall />\n    </>\n  )\n}\n\nfunction Overall () {\n  const { data, loading } = useQuery(overallQuery)\n\n  return (\n    <>\n      <Row><h4 className='mt-5'>Overall Uptime</h4></Row>\n      <Row className='mainBox overall'>\n        {loading\n          ? <Col className='d-flex justify-content-center'><Loader type='pacman' active /></Col>\n          : (\n            <>\n              <Col>\n                <Row className='number'>\n                  <Col>\n                    {data && data.uptime1.toFixed(3)}%\n                  </Col>\n                </Row>\n                <Row className='title'>\n                  <Col>\n                    Last 24 hours\n                  </Col>\n                </Row>\n              </Col>\n              <Col>\n                <Row className='number'>\n                  <Col>\n                    {data && data.uptime7.toFixed(3)}%\n                  </Col>\n                </Row>\n                <Row className='title'>\n                  <Col>\n                    Last 7 days\n                  </Col>\n                </Row>\n              </Col>\n              <Col>\n                <Row className='number'>\n                  <Col>\n                    {data && data.uptime30.toFixed(3)}%\n                  </Col>\n                </Row>\n                <Row className='title'>\n                  <Col>\n                    Last 30 days\n                  </Col>\n                </Row>\n              </Col>\n              <Col>\n                <Row className='number'>\n                  <Col>\n                    {data && data.uptime90.toFixed(3)}%\n                  </Col>\n                </Row>\n                <Row className='title'>\n                  <Col>\n                    Last 90 days\n                  </Col>\n                </Row>\n              </Col>\n            </>\n            )}\n      </Row>\n    </>\n  )\n}\n","\nimport { useMutation, gql } from '@apollo/client'\nimport { toast } from 'react-toastify'\nimport { Col, Form, Button } from 'react-bootstrap'\nimport serialize from 'form-serialize'\n\nconst servicesMutation = gql`\n  mutation createService($name: String!, $url: String!, $interval: Float!, $timeout: Float!) {\n    createService(name: $name, url: $url, interval: $interval, timeout: $timeout){\n      name\n    }\n  }\n`\n\nexport default function Admin () {\n  const [mutate] = useMutation(servicesMutation)\n  function handleSubmitForm (e) {\n    const variables = serialize(e.target, { hash: true })\n    variables.interval = parseFloat(variables.interval)\n    variables.timeout = parseFloat(variables.timeout)\n\n    mutate({ variables }).then(result => {\n      toast.success(`Added service \"${result.data.createService.name}\" succesfully!`)\n      e.target.reset()\n    }).catch(err => {\n      console.log(err)\n      toast.error(err.message, { autoclose: false })\n    })\n\n    e.preventDefault()\n    e.persist()\n  }\n\n  return (\n    <Form inline className='mainBox p-4' onSubmit={handleSubmitForm}>\n      <Form.Row className='w-100 pb-3'>\n        <Col xs='12' md='auto'>\n          <Form.Group>\n            <Form.Label className='mr-2'>Name:</Form.Label>\n            <Form.Control type='text' name='name' required />\n          </Form.Group>\n        </Col>\n        <Col xs='12' md='auto'>\n          <Form.Group>\n            <Form.Label className='mr-2'>Url:</Form.Label>\n            <Form.Control type='text' name='url' required />\n          </Form.Group>\n        </Col>\n      </Form.Row>\n\n      <Form.Row className='w-100 pb-3'>\n        <Col xs='12' md='auto'>\n          <Form.Group>\n            <Form.Label className='mr-2'>Interval:</Form.Label>\n            <Form.Control type='number' min={0} defaultValue={5000} name='interval' required />\n          </Form.Group>\n        </Col>\n        <Col xs='12' md='auto'>\n          <Form.Group>\n            <Form.Label className='mr-2'>Timeout:</Form.Label>\n            <Form.Control type='number' min={0} defaultValue={3000} name='timeout' required />\n          </Form.Group>\n        </Col>\n        <Col xs='auto'>\n          <Button type='submit'>\n            Add Service\n          </Button>\n        </Col>\n      </Form.Row>\n    </Form>\n  )\n}\n","import { gql, useQuery } from '@apollo/client'\nimport { Col, Row } from 'react-bootstrap'\nimport { SiteRow } from './helpers'\nimport Loader from 'react-loaders'\n\nconst serviceQuery = gql`\n  query Services($id: ID!) {\n    service(id: $id) {\n      id\n      name\n      url\n      order\n      state\n\n      uptimeDays(days: 90) {\n        date\n        uptime\n      }\n\n      uptime1: uptime(days: 1)\n      uptime7: uptime(days: 7)\n      uptime30: uptime(days: 30)\n      uptime90: uptime(days: 90)\n\n      response: responseTime(days: 2){\n        avg\n        min\n        max\n      }\n    }\n  }\n`\n\nexport default function Home (props) {\n  const { data, loading } = useQuery(serviceQuery, { variables: { id: props.id } })\n\n  return (\n    <>\n      <h4>Uptime Last 90 days</h4>\n      <Row className='mainBox'>\n        {loading\n          ? <Col className='d-flex justify-content-center'><Loader type='pacman' active /></Col>\n          : (\n            <Col>\n              {data && <SiteRow key={data.service.id} service={data.service} first last />}\n            </Col>\n            )}\n      </Row>\n\n      <Overall data={data} loading={loading} />\n      <ResponseTime data={data} loading={loading} />\n    </>\n  )\n}\n\nfunction Overall (props) {\n  const { data, loading } = props\n\n  return (\n    <>\n      <h4 className='mt-5'>Overall Uptime</h4>\n      <Row className='mainBox overall'>\n        {loading\n          ? <Col className='d-flex justify-content-center'><Loader type='pacman' active /></Col>\n          : (\n            <>\n              <Col>\n                <Row className='number'>\n                  <Col>\n                    {data && data.service.uptime1.toFixed(3)}%\n                  </Col>\n                </Row>\n                <Row className='title'>\n                  <Col>\n                    Last 24 hours\n                  </Col>\n                </Row>\n              </Col>\n              <Col>\n                <Row className='number'>\n                  <Col>\n                    {data && data.service.uptime7.toFixed(3)}%\n                  </Col>\n                </Row>\n                <Row className='title'>\n                  <Col>\n                    Last 7 days\n                  </Col>\n                </Row>\n              </Col>\n              <Col>\n                <Row className='number'>\n                  <Col>\n                    {data && data.service.uptime30.toFixed(3)}%\n                  </Col>\n                </Row>\n                <Row className='title'>\n                  <Col>\n                    Last 30 days\n                  </Col>\n                </Row>\n              </Col>\n              <Col>\n                <Row className='number'>\n                  <Col>\n                    {data && data.service.uptime90.toFixed(3)}%\n                  </Col>\n                </Row>\n                <Row className='title'>\n                  <Col>\n                    Last 90 days\n                  </Col>\n                </Row>\n              </Col>\n            </>\n            )}\n      </Row>\n    </>\n  )\n}\n\nfunction ResponseTime (props) {\n  const { data, loading } = props\n  return (\n    <>\n      <h4 className='mt-5'>Response Time Last 2 days </h4>\n      <Row className='mainBox overall'>\n        <Col style={{ border: 'none' }}>\n          <Row>\n            {loading\n              ? <Col className='d-flex justify-content-center'><Loader type='pacman' active /></Col>\n              : (\n                <>\n                  <Col>\n                    <Row className='number'>\n                      <Col>\n                        {data && data.service.response.avg.toFixed(2)}ms\n                      </Col>\n                    </Row>\n                    <Row className='title'>\n                      <Col>\n                        Avg. response time\n                      </Col>\n                    </Row>\n                  </Col>\n                  <Col>\n                    <Row className='number'>\n                      <Col>\n                        {data && data.service.response.max.toFixed(2)}ms\n                      </Col>\n                    </Row>\n                    <Row className='title'>\n                      <Col>\n                        Max. response time\n                      </Col>\n                    </Row>\n                  </Col>\n                  <Col>\n                    <Row className='number'>\n                      <Col>\n                        {data && data.service.response.min.toFixed(2)}ms\n                      </Col>\n                    </Row>\n                    <Row className='title'>\n                      <Col>\n                        Min. response time\n                      </Col>\n                    </Row>\n                  </Col>\n                </>\n                )}\n          </Row>\n        </Col>\n      </Row>\n    </>\n  )\n}\n","import { createContext } from 'react'\nconst UserContext = createContext()\nexport default UserContext\n","\nimport 'bootstrap/dist/css/bootstrap.min.css'\nimport 'react-toastify/dist/ReactToastify.min.css'\nimport './css/global.scss'\n\nimport ReactHtmlParser from 'react-html-parser'\nimport { useRoutes, navigate } from 'hookrouter'\nimport { ToastContainer } from 'react-toastify'\nimport Cookies from 'js-cookie'\nimport { HttpLink, ApolloLink, ApolloProvider, ApolloClient, InMemoryCache, from, useQuery, gql } from '@apollo/client'\n\nimport Home from './pages/Home'\nimport Admin from './pages/Admin'\nimport Service from './pages/Service'\n\nimport UserContext from './UserContext'\nimport { Container, Row } from 'react-bootstrap'\n\nconst routes = {\n  '/': () => <Home />,\n  '/service/:id': ({ id }) => <Service id={id} />,\n  '/admin': () => <Admin />\n}\n\nconst httpLink = new HttpLink({ uri: '/api' })\nconst authLink = new ApolloLink((operation, forward) => {\n  const token = Cookies.get('token')\n  if (token) operation.setContext({ headers: { authorization: token } })\n\n  return forward(operation)\n})\n\nconst client = new ApolloClient({\n  cache: new InMemoryCache(),\n  link: from([authLink, httpLink])\n})\n\nfunction AppWrapper () {\n  const context = { }\n\n  return (\n    <ApolloProvider client={client}>\n      <UserContext.Provider value={context}>\n        <App />\n      </UserContext.Provider>\n    </ApolloProvider>\n  )\n}\n\nfunction App () {\n  const { data } = useQuery(gql`query Title{ \n    title \n    footer\n  }`)\n  const routeResult = useRoutes(routes)\n\n  return (\n    <>\n      <ToastContainer newestOnTop />\n      <Container>\n        <Row className='my-4 py-2'>\n          <h1 className='title' onClick={() => navigate('/')}>{data ? data.title : ''}</h1>\n        </Row>\n        {routeResult || <div />}\n        {data && ReactHtmlParser(data.footer)}\n      </Container>\n    </>\n  )\n}\n\nexport default AppWrapper\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry)\n      getFID(onPerfEntry)\n      getFCP(onPerfEntry)\n      getLCP(onPerfEntry)\n      getTTFB(onPerfEntry)\n    })\n  }\n}\n\nexport default reportWebVitals\n","import ReactDOM from 'react-dom'\nimport App from './App'\nimport reportWebVitals from './reportWebVitals'\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)\n\nreportWebVitals()\n"],"sourceRoot":""}