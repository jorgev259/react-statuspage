(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{105:function(e,t,s){},130:function(e,t){},169:function(e,t,s){"use strict";s.r(t);var c=s(23),a=s.n(c),n=s(24),r=(s(103),s(104),s(105),s(93)),i=s.n(r),j=s(38),l=s(30),d=s(48),b=s.n(d),m=s(14),o=s(174),x=s(94),O=s(177),u=s(175),h=s(52),p=s(6),v=s.n(p),y=s(2);function g(e){var t="";return null!==e&&(t="green",e<99&&(t="lightgreen"),e<95&&(t="yellow"),e<90&&(t="red")),t}function f(e){var t=e.first,s=e.last,c=e.service,a=e.nameFlag,n=void 0!==a&&a,r=c.name,i=c.uptimeDays,l=c.state,d=i.map((function(e){return e.uptime})),b=d.reduce((function(e,t){return e+t}),0)/d.length,m=function(e){for(var t=e.start.startOf("day"),s=e.end.endOf("day"),c=[];t<s;)c.push(t.toISODate()),t=t.plus({days:1});return c}(h.Interval.fromDateTimes(h.DateTime.now().minus({days:89}),h.DateTime.now()));return Object(y.jsx)(o.a,{className:v()("infoRow",{first:t,"pt-4":!t,"pb-4":!s}),children:Object(y.jsxs)(x.a,{children:[Object(y.jsxs)(o.a,{className:"info",children:[Object(y.jsxs)(x.a,{className:"pl-0",children:[n&&Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(j.A,{href:"/service/".concat(c.id),children:Object(y.jsxs)("span",{style:{color:"white"},children:[r," \u279f "]})}),Object(y.jsx)("span",{className:"mx-1",children:"|"})]}),Object(y.jsxs)("span",{className:g(b),children:[b.toFixed(2),"%"]})]}),Object(y.jsxs)(x.a,{xs:"auto",className:v()("d-flex align-items-center pr-0",{lightgreen:l,red:!l}),children:[Object(y.jsx)("div",{className:"status mx-1",style:{width:"20px",height:"20px"}}),Object(y.jsx)("span",{children:l?"Operational":"Down"})]})]}),Object(y.jsx)(o.a,{className:"flex-nowrap mt-3 justify-content-end",children:m.map((function(e){var t=i.find((function(t){return t.date===e}));return Object(y.jsx)(N,{date:e,value:t?t.uptime:null},e)}))})]})})}function N(e){var t=e.value,s=e.date,c=g(t);return Object(y.jsx)(O.a,{placement:"top",overlay:Object(y.jsxs)(u.a,{children:[s,Object(y.jsx)("br",{}),t?"".concat(t.toFixed(2),"%"):""]}),children:Object(y.jsx)(x.a,{className:"tick px-0",children:Object(y.jsx)("div",{className:c})})})}var F,L,w=s(29),S=s.n(w),k=Object(m.gql)(F||(F=Object(n.a)(["\n  query Services {\n    services {\n      id\n      name\n      url\n      order\n      state\n\n      uptimeDays(days: 90) {\n        date\n        uptime\n      }\n    }\n  }\n"]))),q=Object(m.gql)(L||(L=Object(n.a)(["\n  query Overall {\n    uptime1: uptime(days: 1)\n    uptime7: uptime(days: 7)\n    uptime30: uptime(days: 30)\n    uptime90: uptime(days: 90)\n  }\n"])));function $(){var e=Object(m.useQuery)(k),t=e.data,s=e.loading,c=t&&t.services.every((function(e){return e.state})),a=t&&t.services.every((function(e){return!e.state}));return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(o.a,{className:v()("mainBox",{yellow:!a&&!c,red:a,lightgreen:c}),children:s?Object(y.jsx)(x.a,{className:"d-flex border-0 justify-content-center",children:Object(y.jsx)(S.a,{type:"pacman",active:!0})}):Object(y.jsxs)(x.a,{className:v()("d-flex align-items-center",{"justify-content-center":s}),children:[Object(y.jsx)("div",{className:"status mr-2",style:{width:"20px",height:"20px"}}),Object(y.jsx)("h2",{className:"my-auto",style:{fontWeight:"bold"},children:a||c?c?"All systems operational":"All systems down":"Some systems down"})]})}),Object(y.jsx)(o.a,{className:"mt-5",children:Object(y.jsx)("h4",{children:"Services"})}),Object(y.jsx)(o.a,{className:"mainBox",children:s?Object(y.jsx)(x.a,{className:"d-flex border-0 justify-content-center",children:Object(y.jsx)(S.a,{type:"pacman",active:!0})}):Object(y.jsx)(x.a,{children:t.services.map((function(e,s){return Object(y.jsx)(f,{service:e,first:0===s,last:s===t.services.length-1,nameFlag:!0},e.id)}))})}),Object(y.jsx)(C,{})]})}function C(){var e=Object(m.useQuery)(q),t=e.data,s=e.loading;return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(o.a,{children:Object(y.jsx)("h4",{className:"mt-5",children:"Overall Uptime"})}),Object(y.jsx)(o.a,{className:"mainBox overall",children:s?Object(y.jsx)(x.a,{className:"d-flex justify-content-center border-0",children:Object(y.jsx)(S.a,{type:"pacman",active:!0})}):Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)(x.a,{children:[Object(y.jsx)(o.a,{className:"number",children:Object(y.jsxs)(x.a,{children:[t&&t.uptime1.toFixed(3),"%"]})}),Object(y.jsx)(o.a,{className:"title",children:Object(y.jsx)(x.a,{children:"Last 24 hours"})})]}),Object(y.jsxs)(x.a,{children:[Object(y.jsx)(o.a,{className:"number",children:Object(y.jsxs)(x.a,{children:[t&&t.uptime7.toFixed(3),"%"]})}),Object(y.jsx)(o.a,{className:"title",children:Object(y.jsx)(x.a,{children:"Last 7 days"})})]}),Object(y.jsxs)(x.a,{children:[Object(y.jsx)(o.a,{className:"number",children:Object(y.jsxs)(x.a,{children:[t&&t.uptime30.toFixed(3),"%"]})}),Object(y.jsx)(o.a,{className:"title",children:Object(y.jsx)(x.a,{children:"Last 30 days"})})]}),Object(y.jsxs)(x.a,{children:[Object(y.jsx)(o.a,{className:"number",children:Object(y.jsxs)(x.a,{children:[t&&t.uptime90.toFixed(3),"%"]})}),Object(y.jsx)(o.a,{className:"title",children:Object(y.jsx)(x.a,{children:"Last 90 days"})})]})]})})]})}var D,B,A,T=s(54),I=s(178),G=s(98),M=s(179),P=s(64),Q=s.n(P),R=s(0),U=Object(m.gql)(D||(D=Object(n.a)(["\n  mutation createService($name: String!, $url: String!, $interval: Float!, $timeout: Float!, $ping: Boolean!) {\n    createService(name: $name, url: $url, interval: $interval, timeout: $timeout, ping: $ping){\n      name\n    }\n  }\n"])));function E(){var e=Object(R.useState)(!1),t=Object(T.a)(e,2),s=t[0],c=t[1];return s?Object(y.jsx)(V,{}):Object(y.jsx)(J,{setLogged:c})}function J(e){var t=e.setLogged,s=Object(m.gql)(B||(B=Object(n.a)(["\n  mutation Login($key: String!){\n    login(key: $key)\n  }\n"]))),c=Object(m.useMutation)(s),a=Object(T.a)(c,2),r=a[0],i=a[1].loading;return Object(y.jsx)(I.a,{onSubmit:function(e){e.persist(),e.preventDefault();var s=Q()(e.target,{hash:!0});r({variables:s}).then((function(e){l.b.success("Logged in succesfully!"),b.a.set("token",e.data.login,{sameSite:"Lax"}),t(!0)})).catch((function(e){console.log(e),l.b.error(e.graphQLErrors[0].message,{autoclose:!1})}))},children:Object(y.jsx)(o.a,{children:Object(y.jsxs)(x.a,{md:4,className:"mx-auto",children:[Object(y.jsx)(o.a,{children:Object(y.jsx)(x.a,{children:Object(y.jsxs)(G.a,{children:[Object(y.jsx)("label",{htmlFor:"key",children:"Access Key:"}),Object(y.jsx)("input",{className:"ml-2",required:!0,type:"password",name:"key"})]})})}),Object(y.jsx)(o.a,{children:Object(y.jsx)(x.a,{children:Object(y.jsx)(M.a,{type:"submit",className:"w-100",color:"primary",children:i?Object(y.jsx)("img",{src:"",alt:"loading"}):"Login"})})})]})})})}function V(){var e=Object(m.useMutation)(U),t=Object(T.a)(e,1)[0];return Object(y.jsxs)(I.a,{inline:!0,className:"mainBox p-4",onSubmit:function(e){var s=Q()(e.target,{hash:!0});s.interval=parseFloat(s.interval),s.timeout=parseFloat(s.timeout),s.ping="on"===s.ping,t({variables:s}).then((function(t){l.b.success('Added service "'.concat(t.data.createService.name,'" succesfully!')),e.target.reset()})).catch((function(e){console.log(e),l.b.error(e.message,{autoclose:!1})})),e.preventDefault(),e.persist()},children:[Object(y.jsxs)(I.a.Row,{className:"w-100 pb-3",children:[Object(y.jsx)(x.a,{xs:"12",md:"4",children:Object(y.jsxs)(I.a.Group,{children:[Object(y.jsx)(I.a.Label,{className:"mr-2",children:"Name:"}),Object(y.jsx)(I.a.Control,{type:"text",name:"name",required:!0})]})}),Object(y.jsx)(x.a,{xs:"12",md:"4",children:Object(y.jsxs)(I.a.Group,{children:[Object(y.jsx)(I.a.Label,{className:"mr-2",children:"Url:"}),Object(y.jsx)(I.a.Control,{type:"text",name:"url",required:!0})]})}),Object(y.jsx)(x.a,{xs:"12",md:"4",children:Object(y.jsxs)(I.a.Group,{children:[Object(y.jsx)(I.a.Label,{className:"mr-2",children:"Ping mode:"}),Object(y.jsx)(I.a.Control,{type:"checkbox",name:"ping"})]})})]}),Object(y.jsxs)(I.a.Row,{className:"w-100 pb-3",children:[Object(y.jsx)(x.a,{xs:"12",md:"4",children:Object(y.jsxs)(I.a.Group,{children:[Object(y.jsx)(I.a.Label,{className:"mr-2",children:"Interval:"}),Object(y.jsx)(I.a.Control,{type:"number",min:0,defaultValue:5e3,name:"interval",required:!0})]})}),Object(y.jsx)(x.a,{xs:"12",md:"4",children:Object(y.jsxs)(I.a.Group,{children:[Object(y.jsx)(I.a.Label,{className:"mr-2",children:"Timeout:"}),Object(y.jsx)(I.a.Control,{type:"number",min:0,defaultValue:3e3,name:"timeout",required:!0})]})}),Object(y.jsx)(x.a,{xs:"auto",children:Object(y.jsx)(M.a,{type:"submit",children:"Add Service"})})]})]})}var z=Object(m.gql)(A||(A=Object(n.a)(["\n  query Services($id: ID!) {\n    service(id: $id) {\n      id\n      name\n      url\n      order\n      state\n\n      uptimeDays(days: 90) {\n        date\n        uptime\n      }\n\n      uptime1: uptime(days: 1)\n      uptime7: uptime(days: 7)\n      uptime30: uptime(days: 30)\n      uptime90: uptime(days: 90)\n\n      response: responseTime(days: 2){\n        avg\n        min\n        max\n      }\n    }\n  }\n"])));function H(e){var t=Object(m.useQuery)(z,{variables:{id:e.id}}),s=t.data,c=t.loading;return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("h4",{children:"Uptime Last 90 days"}),Object(y.jsx)(o.a,{className:"mainBox",children:c?Object(y.jsx)(x.a,{className:"d-flex border-0 justify-content-center",children:Object(y.jsx)(S.a,{type:"pacman",active:!0})}):Object(y.jsx)(x.a,{children:s&&Object(y.jsx)(f,{service:s.service,first:!0,last:!0},s.service.id)})}),Object(y.jsx)(K,{data:s,loading:c}),Object(y.jsx)(W,{data:s,loading:c})]})}function K(e){var t=e.data,s=e.loading;return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("h4",{className:"mt-5",children:"Overall Uptime"}),Object(y.jsx)(o.a,{className:"mainBox overall",children:s?Object(y.jsx)(x.a,{className:"d-flex border-0 justify-content-center",children:Object(y.jsx)(S.a,{type:"pacman",active:!0})}):Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)(x.a,{children:[Object(y.jsx)(o.a,{className:"number",children:Object(y.jsxs)(x.a,{children:[t&&t.service.uptime1.toFixed(3),"%"]})}),Object(y.jsx)(o.a,{className:"title",children:Object(y.jsx)(x.a,{children:"Last 24 hours"})})]}),Object(y.jsxs)(x.a,{children:[Object(y.jsx)(o.a,{className:"number",children:Object(y.jsxs)(x.a,{children:[t&&t.service.uptime7.toFixed(3),"%"]})}),Object(y.jsx)(o.a,{className:"title",children:Object(y.jsx)(x.a,{children:"Last 7 days"})})]}),Object(y.jsxs)(x.a,{children:[Object(y.jsx)(o.a,{className:"number",children:Object(y.jsxs)(x.a,{children:[t&&t.service.uptime30.toFixed(3),"%"]})}),Object(y.jsx)(o.a,{className:"title",children:Object(y.jsx)(x.a,{children:"Last 30 days"})})]}),Object(y.jsxs)(x.a,{children:[Object(y.jsx)(o.a,{className:"number",children:Object(y.jsxs)(x.a,{children:[t&&t.service.uptime90.toFixed(3),"%"]})}),Object(y.jsx)(o.a,{className:"title",children:Object(y.jsx)(x.a,{children:"Last 90 days"})})]})]})})]})}function W(e){var t=e.data,s=e.loading;return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("h4",{className:"mt-5",children:"Response Time Last 2 days "}),Object(y.jsx)(o.a,{className:"mainBox overall",children:Object(y.jsx)(x.a,{style:{border:"none"},children:Object(y.jsx)(o.a,{children:s?Object(y.jsx)(x.a,{className:"d-flex border-0 justify-content-center",children:Object(y.jsx)(S.a,{type:"pacman",active:!0})}):Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)(x.a,{children:[Object(y.jsx)(o.a,{className:"number",children:Object(y.jsxs)(x.a,{children:[t&&t.service.response.avg.toFixed(2),"ms"]})}),Object(y.jsx)(o.a,{className:"title",children:Object(y.jsx)(x.a,{children:"Avg. response time"})})]}),Object(y.jsxs)(x.a,{children:[Object(y.jsx)(o.a,{className:"number",children:Object(y.jsxs)(x.a,{children:[t&&t.service.response.max.toFixed(2),"ms"]})}),Object(y.jsx)(o.a,{className:"title",children:Object(y.jsx)(x.a,{children:"Max. response time"})})]}),Object(y.jsxs)(x.a,{children:[Object(y.jsx)(o.a,{className:"number",children:Object(y.jsxs)(x.a,{children:[t&&t.service.response.min.toFixed(2),"ms"]})}),Object(y.jsx)(o.a,{className:"title",children:Object(y.jsx)(x.a,{children:"Min. response time"})})]})]})})})})]})}var X,Y=Object(R.createContext)(),Z=s(176),_={"/":function(){return Object(y.jsx)($,{})},"/service/:id":function(e){var t=e.id;return Object(y.jsx)(H,{id:t})},"/admin":function(){return Object(y.jsx)(E,{})}},ee=new m.HttpLink({uri:"/api"}),te=new m.ApolloLink((function(e,t){var s=b.a.get("token");return s&&e.setContext({headers:{authorization:"Bearer ".concat(s)}}),t(e)})),se=new m.ApolloClient({cache:new m.InMemoryCache,link:Object(m.from)([te,ee])});function ce(){var e=Object(m.useQuery)(Object(m.gql)(X||(X=Object(n.a)(["query Title{ \n    title \n    footer\n  }"])))).data,t=Object(j.useRoutes)(_);return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(l.a,{newestOnTop:!0}),Object(y.jsxs)(Z.a,{children:[Object(y.jsx)(o.a,{className:"my-4 py-2",children:Object(y.jsx)("h1",{className:"title",onClick:function(){return Object(j.navigate)("/")},children:e?e.title:""})}),t||Object(y.jsx)("div",{}),e&&i()(e.footer)]})]})}var ae=function(){return Object(y.jsx)(m.ApolloProvider,{client:se,children:Object(y.jsx)(Y.Provider,{value:{},children:Object(y.jsx)(ce,{})})})},ne=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,180)).then((function(t){var s=t.getCLS,c=t.getFID,a=t.getFCP,n=t.getLCP,r=t.getTTFB;s(e),c(e),a(e),n(e),r(e)}))};a.a.render(Object(y.jsx)(ae,{}),document.getElementById("root")),ne()}},[[169,1,2]]]);
//# sourceMappingURL=main.70014821.chunk.js.map