(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{101:function(e,t,c){},126:function(e,t){},165:function(e,t,c){"use strict";c.r(t);var s,a,n=c(22),r=c.n(n),i=c(26),j=(c(99),c(100),c(101),c(87)),l=c.n(j),d=c(35),b=c(37),x=c(88),m=c.n(x),u=c(14),O=c(6),o=c.n(O),h=c(170),p=c(91),v=c(173),y=c(171),f=c(2),N=Object(u.gql)(s||(s=Object(i.a)(["\n  query Services {\n    services {\n      id\n      name\n      url\n      order\n\n      uptimeDays(days: 90) {\n        day\n        uptime\n      }\n    }\n  }\n"]))),g=Object(u.gql)(a||(a=Object(i.a)(["\n  query Overall {\n    uptime1: uptime(days: 1)\n    uptime7: uptime(days: 7)\n    uptime30: uptime(days: 30)\n    uptime90: uptime(days: 90)\n  }\n"])));function F(){var e=Object(u.useQuery)(N).data;return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(h.a,{children:Object(f.jsx)("h4",{children:"Services"})}),Object(f.jsx)(h.a,{className:"mainBox",children:Object(f.jsx)(p.a,{children:e&&e.services.map((function(t,c){return Object(f.jsx)(q,{service:t,first:0===c,last:c===e.services.length-1},t.id)}))})}),Object(f.jsx)(w,{})]})}function w(){var e=Object(u.useQuery)(g).data;return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(h.a,{children:Object(f.jsx)("h4",{className:"mt-5",children:"Overall Uptime"})}),Object(f.jsxs)(h.a,{className:"mainBox overall",children:[Object(f.jsxs)(p.a,{children:[Object(f.jsx)(h.a,{className:"number",children:Object(f.jsxs)(p.a,{children:[e&&e.uptime1.toFixed(3),"%"]})}),Object(f.jsx)(h.a,{className:"title",children:Object(f.jsx)(p.a,{children:"Last 24 hours"})})]}),Object(f.jsxs)(p.a,{children:[Object(f.jsx)(h.a,{className:"number",children:Object(f.jsx)(p.a,{children:e&&e.uptime7.toFixed(3)})}),Object(f.jsx)(h.a,{className:"title",children:Object(f.jsx)(p.a,{children:"Last 7 days"})})]}),Object(f.jsxs)(p.a,{children:[Object(f.jsx)(h.a,{className:"number",children:Object(f.jsx)(p.a,{children:e&&e.uptime30.toFixed(3)})}),Object(f.jsx)(h.a,{className:"title",children:Object(f.jsx)(p.a,{children:"Last 30 days"})})]}),Object(f.jsxs)(p.a,{children:[Object(f.jsx)(h.a,{className:"number",children:Object(f.jsx)(p.a,{children:e&&e.uptime90.toFixed(3)})}),Object(f.jsx)(h.a,{className:"title",children:Object(f.jsx)(p.a,{children:"Last 90 days"})})]})]})]})}function L(e){var t="";return null!==e&&(t="green",e<99&&(t="lightgreen"),e<95&&(t="yellow"),e<90&&(t="red")),t}function q(e){var t=e.first,c=e.last,s=e.service,a=s.name,n=s.uptimeDays,r=n.map((function(e){return e.uptime})),i=r.reduce((function(e,t){return e+t}),0)/r.length;return Object(f.jsx)(h.a,{className:o()("infoRow",{first:t,"pt-4":!t,"pb-4":!c}),children:Object(f.jsxs)(p.a,{children:[Object(f.jsxs)(h.a,{className:"info",children:[Object(f.jsxs)(p.a,{className:"pl-0",children:[Object(f.jsx)(d.A,{href:"/service/".concat(s.id),children:Object(f.jsx)("span",{style:{color:"white"},children:a})}),Object(f.jsx)("span",{className:"mx-1",children:"|"}),Object(f.jsxs)("span",{className:L(i),children:[i.toFixed(2),"%"]})]}),Object(f.jsx)(p.a,{xs:"auto pr-0 lightgreen",children:Object(f.jsx)("span",{children:"Operational"})})]}),Object(f.jsx)(h.a,{className:"flex-nowrap mt-3 justify-content-end",children:n.map((function(e){return Object(f.jsx)(C,{day:e.day,value:e.uptime},e.day)}))})]})})}function C(e){var t=e.value,c=L(t);return Object(f.jsx)(v.a,{placement:"top",overlay:Object(f.jsxs)(y.a,{children:[e.day,Object(f.jsx)("br",{}),t.toFixed(2),"%"]}),children:Object(f.jsx)(p.a,{className:"tick px-0",children:Object(f.jsx)("div",{className:c})})})}var S,$,k=c(94),B=c(174),A=c(175),D=c(93),T=c.n(D),R=Object(u.gql)(S||(S=Object(i.a)(["\n  mutation createService($name: String!, $url: String!, $interval: Float!, $timeout: Float!) {\n    createService(name: $name, url: $url, interval: $interval, timeout: $timeout){\n      name\n    }\n  }\n"])));function I(){var e=Object(u.useMutation)(R),t=Object(k.a)(e,1)[0];return Object(f.jsxs)(B.a,{inline:!0,className:"mainBox p-4",onSubmit:function(e){var c=T()(e.target,{hash:!0});c.interval=parseFloat(c.interval),c.timeout=parseFloat(c.timeout),t({variables:c}).then((function(t){b.b.success('Added service "'.concat(t.data.createService.name,'" succesfully!')),e.target.reset()})).catch((function(e){console.log(e),b.b.error(e.message,{autoclose:!1})})),e.preventDefault(),e.persist()},children:[Object(f.jsxs)(B.a.Row,{className:"w-100 pb-3",children:[Object(f.jsx)(p.a,{xs:"12",md:"auto",children:Object(f.jsxs)(B.a.Group,{children:[Object(f.jsx)(B.a.Label,{className:"mr-2",children:"Name:"}),Object(f.jsx)(B.a.Control,{type:"text",name:"name",required:!0})]})}),Object(f.jsx)(p.a,{xs:"12",md:"auto",children:Object(f.jsxs)(B.a.Group,{children:[Object(f.jsx)(B.a.Label,{className:"mr-2",children:"Url:"}),Object(f.jsx)(B.a.Control,{type:"text",name:"url",required:!0})]})})]}),Object(f.jsxs)(B.a.Row,{className:"w-100 pb-3",children:[Object(f.jsx)(p.a,{xs:"12",md:"auto",children:Object(f.jsxs)(B.a.Group,{children:[Object(f.jsx)(B.a.Label,{className:"mr-2",children:"Interval:"}),Object(f.jsx)(B.a.Control,{type:"number",min:0,defaultValue:5e3,name:"interval",required:!0})]})}),Object(f.jsx)(p.a,{xs:"12",md:"auto",children:Object(f.jsxs)(B.a.Group,{children:[Object(f.jsx)(B.a.Label,{className:"mr-2",children:"Timeout:"}),Object(f.jsx)(B.a.Control,{type:"number",min:0,defaultValue:3e3,name:"timeout",required:!0})]})}),Object(f.jsx)(p.a,{xs:"auto",children:Object(f.jsx)(A.a,{type:"submit",children:"Add Service"})})]})]})}function G(e){var t="";return null!==e&&(t="green",e<99&&(t="lightgreen"),e<95&&(t="yellow"),e<90&&(t="red")),t}var M=Object(u.gql)($||($=Object(i.a)(["\n  query Services($id: ID!) {\n    service(id: $id) {\n      id\n      name\n      url\n      order\n\n      uptimeDays(days: 90) {\n        day\n        uptime\n      }\n\n      uptime1: uptime(days: 1)\n      uptime7: uptime(days: 7)\n      uptime30: uptime(days: 30)\n      uptime90: uptime(days: 90)\n\n      response: responseTime(days: 2){\n        avg\n        min\n        max\n      }\n    }\n  }\n"])));function P(e){var t=Object(u.useQuery)(M,{variables:{id:e.id}}).data;return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("h4",{children:"Uptime Last 90 days"}),Object(f.jsx)(h.a,{className:"mainBox",children:Object(f.jsx)(p.a,{children:t&&Object(f.jsx)(J,{service:t.service,first:!0,last:!0},t.service.id)})}),Object(f.jsx)(Q,{data:t}),Object(f.jsx)(U,{data:t})]})}function Q(e){var t=e.data;return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("h4",{className:"mt-5",children:"Overall Uptime"}),Object(f.jsxs)(h.a,{className:"mainBox overall",children:[Object(f.jsxs)(p.a,{children:[Object(f.jsx)(h.a,{className:"number",children:Object(f.jsxs)(p.a,{children:[t&&t.service.uptime1.toFixed(3),"%"]})}),Object(f.jsx)(h.a,{className:"title",children:Object(f.jsx)(p.a,{children:"Last 24 hours"})})]}),Object(f.jsxs)(p.a,{children:[Object(f.jsx)(h.a,{className:"number",children:Object(f.jsxs)(p.a,{children:[t&&t.service.uptime7.toFixed(3),"%"]})}),Object(f.jsx)(h.a,{className:"title",children:Object(f.jsx)(p.a,{children:"Last 7 days"})})]}),Object(f.jsxs)(p.a,{children:[Object(f.jsx)(h.a,{className:"number",children:Object(f.jsxs)(p.a,{children:[t&&t.service.uptime30.toFixed(3),"%"]})}),Object(f.jsx)(h.a,{className:"title",children:Object(f.jsx)(p.a,{children:"Last 30 days"})})]}),Object(f.jsxs)(p.a,{children:[Object(f.jsx)(h.a,{className:"number",children:Object(f.jsxs)(p.a,{children:[t&&t.service.uptime90.toFixed(3),"%"]})}),Object(f.jsx)(h.a,{className:"title",children:Object(f.jsx)(p.a,{children:"Last 90 days"})})]})]})]})}function U(e){var t=e.data;return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("h4",{className:"mt-5",children:"Response Time Last 2 days "}),Object(f.jsx)(h.a,{className:"mainBox overall",children:Object(f.jsx)(p.a,{style:{border:"none"},children:Object(f.jsxs)(h.a,{children:[Object(f.jsxs)(p.a,{children:[Object(f.jsx)(h.a,{className:"number",children:Object(f.jsxs)(p.a,{children:[t&&t.service.response.avg.toFixed(2),"ms"]})}),Object(f.jsx)(h.a,{className:"title",children:Object(f.jsx)(p.a,{children:"Avg. response time"})})]}),Object(f.jsxs)(p.a,{children:[Object(f.jsx)(h.a,{className:"number",children:Object(f.jsxs)(p.a,{children:[t&&t.service.response.max.toFixed(2),"ms"]})}),Object(f.jsx)(h.a,{className:"title",children:Object(f.jsx)(p.a,{children:"Max. response time"})})]}),Object(f.jsxs)(p.a,{children:[Object(f.jsx)(h.a,{className:"number",children:Object(f.jsxs)(p.a,{children:[t&&t.service.response.min.toFixed(2),"ms"]})}),Object(f.jsx)(h.a,{className:"title",children:Object(f.jsx)(p.a,{children:"Min. response time"})})]})]})})})]})}function J(e){var t=e.first,c=e.last,s=e.service.uptimeDays,a=s.map((function(e){return e.uptime})),n=a.reduce((function(e,t){return e+t}),0)/a.length;return Object(f.jsx)(h.a,{className:o()("infoRow",{first:t,"pt-4":!t,"pb-4":!c}),children:Object(f.jsxs)(p.a,{children:[Object(f.jsx)(h.a,{className:"info",children:Object(f.jsx)(p.a,{className:"pl-0",children:Object(f.jsxs)("span",{className:G(n),children:[n.toFixed(2),"%"]})})}),Object(f.jsx)(h.a,{className:"flex-nowrap mt-3 justify-content-end",children:s.map((function(e){return Object(f.jsx)(V,{day:e.day,value:e.uptime},e.day)}))})]})})}function V(e){var t=e.value,c=G(t);return Object(f.jsx)(v.a,{placement:"top",overlay:Object(f.jsxs)(y.a,{children:[e.day,Object(f.jsx)("br",{}),t.toFixed(2),"%"]}),children:Object(f.jsx)(p.a,{className:"tick px-0",children:Object(f.jsx)("div",{className:c})})})}var z,E=c(0),H=Object(E.createContext)(),K=c(172),W={"/":function(){return Object(f.jsx)(F,{})},"/service/:id":function(e){var t=e.id;return Object(f.jsx)(P,{id:t})},"/admin":function(){return Object(f.jsx)(I,{})}},X=new u.HttpLink({uri:"/api"}),Y=new u.ApolloLink((function(e,t){var c=m.a.get("token");return c&&e.setContext({headers:{authorization:c}}),t(e)})),Z=new u.ApolloClient({cache:new u.InMemoryCache,link:Object(u.from)([Y,X])});function _(){var e=Object(u.useQuery)(Object(u.gql)(z||(z=Object(i.a)(["query Title{ \n    title \n    footer\n  }"])))).data,t=Object(d.useRoutes)(W);return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(b.a,{newestOnTop:!0}),Object(f.jsxs)(K.a,{children:[Object(f.jsx)(h.a,{className:"my-4 py-2",children:Object(f.jsx)("h1",{className:"title",onClick:function(){return Object(d.navigate)("/")},children:e?e.title:""})}),t||Object(f.jsx)("div",{}),e&&l()(e.footer)]})]})}var ee=function(){return Object(f.jsx)(u.ApolloProvider,{client:Z,children:Object(f.jsx)(H.Provider,{value:{},children:Object(f.jsx)(_,{})})})},te=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,176)).then((function(t){var c=t.getCLS,s=t.getFID,a=t.getFCP,n=t.getLCP,r=t.getTTFB;c(e),s(e),a(e),n(e),r(e)}))};r.a.render(Object(f.jsx)(ee,{}),document.getElementById("root")),te()}},[[165,1,2]]]);
//# sourceMappingURL=main.5090d4bf.chunk.js.map