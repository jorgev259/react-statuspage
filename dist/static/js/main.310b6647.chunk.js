(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{104:function(e,t,s){"use strict";s.r(t);var c,a,n=s(22),r=s.n(n),i=s(26),j=(s(80),s(81),s(82),s(41)),l=s(34),d=s(69),b=s.n(d),m=s(14),x=s(6),u=s.n(x),O=s(109),o=s(72),h=s(112),p=s(110),v=s(2),y=Object(m.gql)(c||(c=Object(i.a)(["\n  query Services {\n    services {\n      id\n      name\n      url\n      order\n\n      uptimeDays(days: 90) {\n        day\n        uptime\n      }\n    }\n  }\n"]))),N=Object(m.gql)(a||(a=Object(i.a)(["\n  query Overall {\n    uptime1: uptime(days: 1)\n    uptime7: uptime(days: 7)\n    uptime30: uptime(days: 30)\n    uptime90: uptime(days: 90)\n  }\n"])));function f(){var e=Object(m.useQuery)(y).data;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("h4",{children:"Uptime Last 90 days"}),Object(v.jsx)(O.a,{className:"mainBox",children:Object(v.jsx)(o.a,{children:e&&e.services.map((function(t,s){return Object(v.jsx)(L,{service:t,first:0===s,last:s===e.services.length-1},t.id)}))})}),Object(v.jsx)(g,{})]})}function g(){var e=Object(m.useQuery)(N).data;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("h4",{className:"mt-5",children:"Overall Uptime"}),Object(v.jsxs)(O.a,{className:"mainBox overall",style:{marginBottom:"200px"},children:[Object(v.jsxs)(o.a,{children:[Object(v.jsx)(O.a,{className:"number",children:Object(v.jsxs)(o.a,{children:[e&&e.uptime1.toFixed(3),"%"]})}),Object(v.jsx)(O.a,{className:"title",children:Object(v.jsx)(o.a,{children:"Last 24 hours"})})]}),Object(v.jsxs)(o.a,{children:[Object(v.jsx)(O.a,{className:"number",children:Object(v.jsx)(o.a,{children:e&&e.uptime7.toFixed(3)})}),Object(v.jsx)(O.a,{className:"title",children:Object(v.jsx)(o.a,{children:"Last 7 days"})})]}),Object(v.jsxs)(o.a,{children:[Object(v.jsx)(O.a,{className:"number",children:Object(v.jsx)(o.a,{children:e&&e.uptime30.toFixed(3)})}),Object(v.jsx)(O.a,{className:"title",children:Object(v.jsx)(o.a,{children:"Last 30 days"})})]}),Object(v.jsxs)(o.a,{children:[Object(v.jsx)(O.a,{className:"number",children:Object(v.jsx)(o.a,{children:e&&e.uptime90.toFixed(3)})}),Object(v.jsx)(O.a,{className:"title",children:Object(v.jsx)(o.a,{children:"Last 90 days"})})]})]})]})}function F(e){var t="";return null!==e&&(t="green",e<99&&(t="lightgreen"),e<95&&(t="yellow"),e<90&&(t="red")),t}function L(e){var t=e.first,s=e.last,c=e.service,a=c.name,n=c.uptimeDays,r=n.map((function(e){return e.uptime})),i=r.reduce((function(e,t){return e+t}),0)/r.length;return Object(v.jsx)(O.a,{className:u()("infoRow",{first:t,"pt-4":!t,"pb-4":!s}),children:Object(v.jsxs)(o.a,{children:[Object(v.jsxs)(O.a,{className:"info",children:[Object(v.jsxs)(o.a,{className:"pl-0",children:[Object(v.jsx)(j.A,{href:"/service/".concat(c.id),children:Object(v.jsx)("span",{style:{color:"white"},children:a})}),Object(v.jsx)("span",{className:"mx-1",children:"|"}),Object(v.jsxs)("span",{className:F(i),children:[i.toFixed(2),"%"]})]}),Object(v.jsx)(o.a,{xs:"auto pr-0 lightgreen",children:Object(v.jsx)("span",{children:"Operational"})})]}),Object(v.jsx)(O.a,{className:"flex-nowrap mt-3 justify-content-end",children:n.map((function(e){return Object(v.jsx)(w,{day:e.day,value:e.uptime},e.day)}))})]})})}function w(e){var t=e.value,s=F(t);return Object(v.jsx)(h.a,{placement:"top",overlay:Object(v.jsxs)(p.a,{children:[e.day,Object(v.jsx)("br",{}),t.toFixed(2),"%"]}),children:Object(v.jsx)(o.a,{className:"tick px-0",children:Object(v.jsx)("div",{className:s})})})}var q,C,S=s(75),$=s(113),B=s(114),k=s(74),A=s.n(k),D=Object(m.gql)(q||(q=Object(i.a)(["\n  mutation createService($name: String!, $url: String!, $interval: Float!, $timeout: Float!) {\n    createService(name: $name, url: $url, interval: $interval, timeout: $timeout){\n      name\n    }\n  }\n"])));function T(){var e=Object(m.useMutation)(D),t=Object(S.a)(e,1)[0];return Object(v.jsxs)($.a,{inline:!0,className:"mainBox p-4",onSubmit:function(e){var s=A()(e.target,{hash:!0});s.interval=parseFloat(s.interval),s.timeout=parseFloat(s.timeout),t({variables:s}).then((function(t){l.b.success('Added service "'.concat(t.data.createService.name,'" succesfully!')),e.target.reset()})).catch((function(e){console.log(e),l.b.error(e.message,{autoclose:!1})})),e.preventDefault(),e.persist()},children:[Object(v.jsxs)($.a.Row,{className:"w-100 pb-3",children:[Object(v.jsx)(o.a,{xs:"12",md:"auto",children:Object(v.jsxs)($.a.Group,{children:[Object(v.jsx)($.a.Label,{className:"mr-2",children:"Name:"}),Object(v.jsx)($.a.Control,{type:"text",name:"name",required:!0})]})}),Object(v.jsx)(o.a,{xs:"12",md:"auto",children:Object(v.jsxs)($.a.Group,{children:[Object(v.jsx)($.a.Label,{className:"mr-2",children:"Url:"}),Object(v.jsx)($.a.Control,{type:"text",name:"url",required:!0})]})})]}),Object(v.jsxs)($.a.Row,{className:"w-100 pb-3",children:[Object(v.jsx)(o.a,{xs:"12",md:"auto",children:Object(v.jsxs)($.a.Group,{children:[Object(v.jsx)($.a.Label,{className:"mr-2",children:"Interval:"}),Object(v.jsx)($.a.Control,{type:"number",min:0,defaultValue:5e3,name:"interval",required:!0})]})}),Object(v.jsx)(o.a,{xs:"12",md:"auto",children:Object(v.jsxs)($.a.Group,{children:[Object(v.jsx)($.a.Label,{className:"mr-2",children:"Timeout:"}),Object(v.jsx)($.a.Control,{type:"number",min:0,defaultValue:3e3,name:"timeout",required:!0})]})}),Object(v.jsx)(o.a,{xs:"auto",children:Object(v.jsx)(B.a,{type:"submit",children:"Add Service"})})]})]})}function R(e){var t="";return null!==e&&(t="green",e<99&&(t="lightgreen"),e<95&&(t="yellow"),e<90&&(t="red")),t}var I=Object(m.gql)(C||(C=Object(i.a)(["\n  query Services($id: ID!) {\n    service(id: $id) {\n      id\n      name\n      url\n      order\n\n      uptimeDays(days: 90) {\n        day\n        uptime\n      }\n\n      uptime1: uptime(days: 1)\n      uptime7: uptime(days: 7)\n      uptime30: uptime(days: 30)\n      uptime90: uptime(days: 90)\n\n      response: responseTime(days: 2){\n        avg\n        min\n        max\n      }\n    }\n  }\n"])));function U(e){var t=Object(m.useQuery)(I,{variables:{id:e.id}}).data;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("h4",{children:"Uptime Last 90 days"}),Object(v.jsx)(O.a,{className:"mainBox",children:Object(v.jsx)(o.a,{children:t&&Object(v.jsx)(P,{service:t.service,first:!0,last:!0},t.service.id)})}),Object(v.jsx)(G,{data:t}),Object(v.jsx)(M,{data:t})]})}function G(e){var t=e.data;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("h4",{className:"mt-5",children:"Overall Uptime"}),Object(v.jsxs)(O.a,{className:"mainBox overall",children:[Object(v.jsxs)(o.a,{children:[Object(v.jsx)(O.a,{className:"number",children:Object(v.jsxs)(o.a,{children:[t&&t.service.uptime1.toFixed(3),"%"]})}),Object(v.jsx)(O.a,{className:"title",children:Object(v.jsx)(o.a,{children:"Last 24 hours"})})]}),Object(v.jsxs)(o.a,{children:[Object(v.jsx)(O.a,{className:"number",children:Object(v.jsxs)(o.a,{children:[t&&t.service.uptime7.toFixed(3),"%"]})}),Object(v.jsx)(O.a,{className:"title",children:Object(v.jsx)(o.a,{children:"Last 7 days"})})]}),Object(v.jsxs)(o.a,{children:[Object(v.jsx)(O.a,{className:"number",children:Object(v.jsxs)(o.a,{children:[t&&t.service.uptime30.toFixed(3),"%"]})}),Object(v.jsx)(O.a,{className:"title",children:Object(v.jsx)(o.a,{children:"Last 30 days"})})]}),Object(v.jsxs)(o.a,{children:[Object(v.jsx)(O.a,{className:"number",children:Object(v.jsxs)(o.a,{children:[t&&t.service.uptime90.toFixed(3),"%"]})}),Object(v.jsx)(O.a,{className:"title",children:Object(v.jsx)(o.a,{children:"Last 90 days"})})]})]})]})}function M(e){var t=e.data;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("h4",{className:"mt-5",children:"Response Time Last 2 days "}),Object(v.jsx)(O.a,{className:"mainBox overall",children:Object(v.jsx)(o.a,{style:{border:"none"},children:Object(v.jsxs)(O.a,{children:[Object(v.jsxs)(o.a,{children:[Object(v.jsx)(O.a,{className:"number",children:Object(v.jsxs)(o.a,{children:[t&&t.service.response.avg.toFixed(2),"ms"]})}),Object(v.jsx)(O.a,{className:"title",children:Object(v.jsx)(o.a,{children:"Avg. response time"})})]}),Object(v.jsxs)(o.a,{children:[Object(v.jsx)(O.a,{className:"number",children:Object(v.jsxs)(o.a,{children:[t&&t.service.response.max.toFixed(2),"ms"]})}),Object(v.jsx)(O.a,{className:"title",children:Object(v.jsx)(o.a,{children:"Max. response time"})})]}),Object(v.jsxs)(o.a,{children:[Object(v.jsx)(O.a,{className:"number",children:Object(v.jsxs)(o.a,{children:[t&&t.service.response.min.toFixed(2),"ms"]})}),Object(v.jsx)(O.a,{className:"title",children:Object(v.jsx)(o.a,{children:"Min. response time"})})]})]})})})]})}function P(e){var t=e.first,s=e.last,c=e.service.uptimeDays,a=c.map((function(e){return e.uptime})),n=a.reduce((function(e,t){return e+t}),0)/a.length;return Object(v.jsx)(O.a,{className:u()("infoRow",{first:t,"pt-4":!t,"pb-4":!s}),children:Object(v.jsxs)(o.a,{children:[Object(v.jsx)(O.a,{className:"info",children:Object(v.jsx)(o.a,{className:"pl-0",children:Object(v.jsxs)("span",{className:R(n),children:[n.toFixed(2),"%"]})})}),Object(v.jsx)(O.a,{className:"flex-nowrap mt-3 justify-content-end",children:c.map((function(e){return Object(v.jsx)(Q,{day:e.day,value:e.uptime},e.day)}))})]})})}function Q(e){var t=e.value,s=R(t);return Object(v.jsx)(h.a,{placement:"top",overlay:Object(v.jsxs)(p.a,{children:[e.day,Object(v.jsx)("br",{}),t.toFixed(2),"%"]}),children:Object(v.jsx)(o.a,{className:"tick px-0",children:Object(v.jsx)("div",{className:s})})})}var J,V=s(0),z=Object(V.createContext)(),E=s(111),H={"/":function(){return Object(v.jsx)(f,{})},"/service/:id":function(e){var t=e.id;return Object(v.jsx)(U,{id:t})},"/admin":function(){return Object(v.jsx)(T,{})}},K=new m.HttpLink({uri:"/api"}),W=new m.ApolloLink((function(e,t){var s=b.a.get("token");return s&&e.setContext({headers:{authorization:s}}),t(e)})),X=new m.ApolloClient({cache:new m.InMemoryCache,link:Object(m.from)([W,K])});function Y(){var e=Object(m.useQuery)(Object(m.gql)(J||(J=Object(i.a)(["query Title{ title }"])))).data,t=Object(j.useRoutes)(H);return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(l.a,{newestOnTop:!0}),Object(v.jsxs)(E.a,{children:[Object(v.jsx)(O.a,{className:"my-4 py-2",children:Object(v.jsx)(o.a,{children:Object(v.jsx)("h1",{className:"title",children:e?e.title:""})})}),t||Object(v.jsx)("div",{})]})]})}var Z=function(){return Object(v.jsx)(m.ApolloProvider,{client:X,children:Object(v.jsx)(z.Provider,{value:{},children:Object(v.jsx)(Y,{})})})},_=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,115)).then((function(t){var s=t.getCLS,c=t.getFID,a=t.getFCP,n=t.getLCP,r=t.getTTFB;s(e),c(e),a(e),n(e),r(e)}))};r.a.render(Object(v.jsx)(Z,{}),document.getElementById("root")),_()},82:function(e,t,s){}},[[104,1,2]]]);
//# sourceMappingURL=main.310b6647.chunk.js.map